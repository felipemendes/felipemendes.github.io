{"componentChunkName":"component---src-templates-blog-post-js","path":"/lazy-var/","result":{"data":{"site":{"siteMetadata":{"title":"Felipe Mendes"}},"markdownRemark":{"id":"0f618a9a-e0ce-56b5-8abe-a61e1cd700f7","excerpt":"Em desenvolvimento mobile o poder de computação é muito limitado comparado à outras plataformas. Por esse motivo uma boa prática é criar objetos complexos…","html":"<p>Em desenvolvimento mobile o poder de computação é muito limitado comparado à outras plataformas. Por esse motivo uma boa prática é criar objetos complexos somente quando precisamos deles.</p>\n<p>Swift tem um mecanismo embutido na linguagem que permite o cálculo <a href=\"https://en.wikipedia.org/wiki/Just-in-time_compilation\">just-in-time</a> para tarefas mais complexas chamado de <code class=\"language-text\">lazy var</code>. Esse tipo de declaração permite que a propriedade seja executada somente quando for solicitada pela primeira vez. Se nunca for solicitada, a propriedade nunca é executada.</p>\n<p>No exemplo abaixo foram criadas quatro variáveis, duas com o indicador <code class=\"language-text\">lazy</code> e duas sem. Um <code class=\"language-text\">breakpoint</code> foi habilitado no início da função <code class=\"language-text\">viewDidLoad</code>. Quando o <code class=\"language-text\">breakpoint</code> é acionado <strong>somente as propriedades sem o indicador <code class=\"language-text\">lazy</code> são criadas</strong>. Como podemos confirmar no <code class=\"language-text\">lldb</code>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e0e35b7ddf36e0874bd2fddb41b86a45/6bff2/var-criada.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.26582278481012%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABQUlEQVQoz52S2W6DMBBF/f+/1fdWylPVhKKEbBACBhvv9u0QmiaRkm4jHZkxZph7PUzaANdrNIcjeFVClgeopocRGtE5JAAppV/DuAuAjRC1QNtweG0ot4AbcfhrsHnpoQcJUXHU1F2x2aLpOGywE958izQ9Wnk80RsO9vRqKOmx39UothWKXYmK04FBTKgH0DuuJLZdiazKkZU5VnwNdlQki4xqW4WaC7iQTq3H9Jj0SUx3JHfGIwWPQWp0QsKM/n1FuuJq9+Yi4g2soc56KuasgaYLkUpBSPJUkKR+gBxoAqShH057ktYQImK8DzuQd9kiQ75cYv2eY/8yAy82sEoj0IHx41OBEGidOHd3LnLJaWwkXciyWKF8W6B7niGsdzQuHv8NpkaJJEWTFK/1xbUfBngMS34bY2hcHT07DNrjAwm8DG7R30hEAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Var criada\"\n        title=\"Var criada\"\n        src=\"/static/e0e35b7ddf36e0874bd2fddb41b86a45/f058b/var-criada.png\"\n        srcset=\"/static/e0e35b7ddf36e0874bd2fddb41b86a45/c26ae/var-criada.png 158w,\n/static/e0e35b7ddf36e0874bd2fddb41b86a45/6bdcf/var-criada.png 315w,\n/static/e0e35b7ddf36e0874bd2fddb41b86a45/f058b/var-criada.png 630w,\n/static/e0e35b7ddf36e0874bd2fddb41b86a45/40601/var-criada.png 945w,\n/static/e0e35b7ddf36e0874bd2fddb41b86a45/6bff2/var-criada.png 957w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Ao avançar a execução do código, as propriedades do tipo <code class=\"language-text\">lazy</code> somente são criadas em tempo de execução.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2aa3bcffeb7a6a9cda776362a536d8b3/b97f6/lazy-var-criada-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.26582278481012%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABOUlEQVQoz51SCW6DMBDk/z/rH1JSqaEhHMb4Wl94uiZp1UpRJbrSyPgaZmfcmJARNUEMM+RwgxlGOKFA2iHHiFLKITQyZoBJ9aQghEQkQvEeJXhsIeBoNadbwuYTaLKQ04q+n2Askz4OHFb4ckr1FmghrMJAihWBFf63moHV5JwwjAr9vIDYt7RtCCkx8t/IGZQ8ZjNi0gOEm5mQAyFWtEiLSSqszu0HK6F/4Od3BcW0/9jzaAPhunTo5nfc1JVDkQ7aEFIM8ByINWaHYeLVejjykDbAWV6re9aicAd3z7bdrl8tT/2M9rXF2/mM7nLBR9dx2gIkFiSlkX1AZoLMqr+w8Xxjon38xn29UWrFuW053R5a611lrJf6gTGi0LGAGs/+1VaIiRL786yePY9agd9pRWQ/K5zP+ATfbA6qFQ2+VAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Lazy var criada 1\"\n        title=\"Lazy var criada 1\"\n        src=\"/static/2aa3bcffeb7a6a9cda776362a536d8b3/f058b/lazy-var-criada-1.png\"\n        srcset=\"/static/2aa3bcffeb7a6a9cda776362a536d8b3/c26ae/lazy-var-criada-1.png 158w,\n/static/2aa3bcffeb7a6a9cda776362a536d8b3/6bdcf/lazy-var-criada-1.png 315w,\n/static/2aa3bcffeb7a6a9cda776362a536d8b3/f058b/lazy-var-criada-1.png 630w,\n/static/2aa3bcffeb7a6a9cda776362a536d8b3/40601/lazy-var-criada-1.png 945w,\n/static/2aa3bcffeb7a6a9cda776362a536d8b3/b97f6/lazy-var-criada-1.png 958w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d58dc4eecedf224b34824d098f4d6ce4/6bff2/lazy-var-criada-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.26582278481012%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABQElEQVQoz5WSCW7CMBBFuf/JeoKqahugCyGbHW9xvMT+HWJQhYqosPQ0XpLx/57ZKOvhpAXvGETXwXQ9LFdw2mLxHjnnh9iIkICwQDONkQuEeUZ2Dtk7JEr46NhUXURyEbY3EINE2zCYiRKeP3hY4dN7AFLCPFpIbjAyAUcq6bSA/7lKyGxc9xmf0NPbhaVoW1Ih3YgpX/PrhizvhgGD4vhqO+yaAw68A58U2CQL5oQ4x8JA6wudZnht3vD8/YK3viKFZFMqA+csJjtBKbkilQCXGnoyYFRxrcu+0gpxCUQ8E+DCvOLjTAlbjt12j8/9B+pDjWPbggsB7wPZy0QiqyVe+FuM8pyrZUm3bqsKx/pIKjQsWXejQI7xbnvknG+3jXcexhjMVNm4LEh1g8xG5NndbZvTcNSv1tr133XuFvwAuekMtu9ksqsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Lazy var criada 2\"\n        title=\"Lazy var criada 2\"\n        src=\"/static/d58dc4eecedf224b34824d098f4d6ce4/f058b/lazy-var-criada-2.png\"\n        srcset=\"/static/d58dc4eecedf224b34824d098f4d6ce4/c26ae/lazy-var-criada-2.png 158w,\n/static/d58dc4eecedf224b34824d098f4d6ce4/6bdcf/lazy-var-criada-2.png 315w,\n/static/d58dc4eecedf224b34824d098f4d6ce4/f058b/lazy-var-criada-2.png 630w,\n/static/d58dc4eecedf224b34824d098f4d6ce4/40601/lazy-var-criada-2.png 945w,\n/static/d58dc4eecedf224b34824d098f4d6ce4/6bff2/lazy-var-criada-2.png 957w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Esta prática tem diversas utilidades e é muito comum em <strong>propriedades computadas</strong>. No exemplo abaixo, a propriedade <code class=\"language-text\">lazy var fullName</code> somente será criada na memória quando invocada. E como não foi chamada no teste não houve desperdício de memória, mesmo o objeto sendo instanciado.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c64ea79e042071517434602aabbf3066/b97f6/lazy-var-nao-invocada.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.0379746835443%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAAA20lEQVQoz61S2W6EMAzM/38nKgVSkYWcOM40hk3VBWnFw440sXONJ4cKa4SZDUopEEgr+R0S0YWK1oTxa4D+0WDvwTEcwm+EBMwMX9efqTgxzDCj73u4cUR6rOB9UxFVPNXRcBYMIbxQUSZkS1XIwhuDMK8IzsH6gBhjjR455xfXLU8p7SLN3S7obYCTTp3caHveIi5HPEOK6GmCq8WbO2stlJ5WfOsHhupsMhaRCuJWrvE/65iPhK7rsCzLn0NTT6gOV4cj5lIr823KHnHaXlhyJc3db3KHCh/GL0VJxED5q4lZAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Lazy var não invocada\"\n        title=\"Lazy var não invocada\"\n        src=\"/static/c64ea79e042071517434602aabbf3066/f058b/lazy-var-nao-invocada.png\"\n        srcset=\"/static/c64ea79e042071517434602aabbf3066/c26ae/lazy-var-nao-invocada.png 158w,\n/static/c64ea79e042071517434602aabbf3066/6bdcf/lazy-var-nao-invocada.png 315w,\n/static/c64ea79e042071517434602aabbf3066/f058b/lazy-var-nao-invocada.png 630w,\n/static/c64ea79e042071517434602aabbf3066/40601/lazy-var-nao-invocada.png 945w,\n/static/c64ea79e042071517434602aabbf3066/b97f6/lazy-var-nao-invocada.png 958w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>","frontmatter":{"title":"Lazy Var","date":"27 fevereiro, 2019","description":""}},"previous":{"fields":{"slug":"/struct-vs-class/"},"frontmatter":{"title":"Struct vs Class"}},"next":{"fields":{"slug":"/gerenciamento-de-memoria/"},"frontmatter":{"title":"Gerenciamento de Memória"}}},"pageContext":{"id":"0f618a9a-e0ce-56b5-8abe-a61e1cd700f7","previousPostId":"97aae8b0-73e8-5ab8-b7f5-9aebb3a763a2","nextPostId":"68dd35b2-0643-5a8e-94ce-63ec081bc0c8"}},"staticQueryHashes":["1344965497","2841359383"]}