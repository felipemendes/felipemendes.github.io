{"componentChunkName":"component---src-templates-blog-post-js","path":"/lazy-var/","result":{"data":{"site":{"siteMetadata":{"title":"Felipe Mendes"}},"markdownRemark":{"id":"40bfd97f-614c-5cf6-85fc-580b5017c9f8","excerpt":"Em desenvolvimento mobile o poder de computação é muito limitado comparado à outras plataformas. Por esse motivo uma boa prática é criar objetos complexos…","html":"<p>Em desenvolvimento mobile o poder de computação é muito limitado comparado à outras plataformas. Por esse motivo uma boa prática é criar objetos complexos somente quando precisamos deles.</p>\n<p>Swift tem um mecanismo embutido na linguagem que permite o cálculo <a href=\"https://en.wikipedia.org/wiki/Just-in-time_compilation\">just-in-time</a> para tarefas mais complexas chamado de <code class=\"language-text\">lazy var</code>. Esse tipo de declaração permite que a propriedade seja executada somente quando for solicitada pela primeira vez. Se nunca for solicitada, a propriedade nunca é executada.</p>\n<p>No exemplo abaixo foram criadas quatro variáveis, duas com o indicador <code class=\"language-text\">lazy</code> e duas sem. Um <code class=\"language-text\">breakpoint</code> foi habilitado no início da função <code class=\"language-text\">viewDidLoad</code>. Quando o <code class=\"language-text\">breakpoint</code> é acionado <strong>somente as propriedades sem o indicador <code class=\"language-text\">lazy</code> são criadas</strong>. Como podemos confirmar no <code class=\"language-text\">lldb</code>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e0e35b7ddf36e0874bd2fddb41b86a45/6bff2/var-criada.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.26582278481012%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABPUlEQVQoz52T607DMAyF8/5PxSuAgD+DXTrWlvWWdrk2aQ6nYwPxY9OGpU+OpdTHsV1hxwgvDaqyQvtZ4kCv6gG6N4ghYLaU0s2IxkWASU2nIVuJUWvAWcA7JO9xr4mdDAjW4VD3aOsWDZNqxjFFMiFO4QqRtXjY0RzxwUI8vDq0g0RV1MjzPZbZFruqQKf7E8MFekgzIJcFFuUbFsUC627DCntPpYSqVihqSaUJDOcu3ESY/iJ6x8bzeWqwkP0A6xzut/SDkJym0hZhHOGJ5iAMk2pj0B8MPYW0gzEaWs9w+jFeROzzBqvlGussw8cmQ/70gma7g1GKAmz6GE6eghSb/TRNxxWZ/fn8HbNCzQ8zJivfV+genxHWW4BV8Qb+Y0IxYdt1UE2LkWuTQvztypUFnu1cdeAPML/E+ogvmzUMZV84cM4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Var criada\"\n        title=\"Var criada\"\n        src=\"/static/e0e35b7ddf36e0874bd2fddb41b86a45/f058b/var-criada.png\"\n        srcset=\"/static/e0e35b7ddf36e0874bd2fddb41b86a45/c26ae/var-criada.png 158w,\n/static/e0e35b7ddf36e0874bd2fddb41b86a45/6bdcf/var-criada.png 315w,\n/static/e0e35b7ddf36e0874bd2fddb41b86a45/f058b/var-criada.png 630w,\n/static/e0e35b7ddf36e0874bd2fddb41b86a45/40601/var-criada.png 945w,\n/static/e0e35b7ddf36e0874bd2fddb41b86a45/6bff2/var-criada.png 957w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Ao avançar a execução do código, as propriedades do tipo <code class=\"language-text\">lazy</code> somente são criadas em tempo de execução.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2aa3bcffeb7a6a9cda776362a536d8b3/b97f6/lazy-var-criada-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.26582278481012%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABO0lEQVQoz52T7U7FIAyGd//X5U3448Tp2Xa2M9gXsMLoeO3Qk6gxMbPJk0L6QWmhWAMjTCv62x1De8PS9jBqgZtX8LYhpXSKQnsGNoYbLKZxQnAOiVakQNi9x1kp6ilKYIRVBtMwYxwXkOyTGDNnK3x6lmDeEUaCHRxUp+GsxX+lqGcC74x7P6PpNVbpG8tJIfKfbMzwMWCwCmq5Y1w1inZZQcFDSw+7YcIo1fnImcCfOsa8fkBbzBw2J72+TRWq4Q3t0qAw1oNIpilV8hEYAjbBy0Cs86IDjNg9kfhR1vu+i/+D9P3KXaNxuZQoX15QXSs0dQOlFKwxEuzzAbka7z+QfU4obTn0TwprDV7LEl3bYZ7nnIgkiK810rUBHJ0bipN3p7WGkUSbDOQh6Su/PI9DDv+DKK06IPkk77TTDnxdk921AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Lazy var criada 1\"\n        title=\"Lazy var criada 1\"\n        src=\"/static/2aa3bcffeb7a6a9cda776362a536d8b3/f058b/lazy-var-criada-1.png\"\n        srcset=\"/static/2aa3bcffeb7a6a9cda776362a536d8b3/c26ae/lazy-var-criada-1.png 158w,\n/static/2aa3bcffeb7a6a9cda776362a536d8b3/6bdcf/lazy-var-criada-1.png 315w,\n/static/2aa3bcffeb7a6a9cda776362a536d8b3/f058b/lazy-var-criada-1.png 630w,\n/static/2aa3bcffeb7a6a9cda776362a536d8b3/40601/lazy-var-criada-1.png 945w,\n/static/2aa3bcffeb7a6a9cda776362a536d8b3/b97f6/lazy-var-criada-1.png 958w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d58dc4eecedf224b34824d098f4d6ce4/6bff2/lazy-var-criada-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.26582278481012%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABR0lEQVQoz5VS2Y7DIAzM///WfsW+bDdRNicJVyABAlOD2q36sEctjWwDtsaMK2V2WL5hHmas4wA9MmimYKTF6T1SSi+hWo4IhBOGG4iVw2mNtFsktyMeB161qlOBCgM2YiVWCS40dsrT7cHLDN/eqfg84fgOvW6YBoYts0y55T9xa5bjqieG2ZbFYGQCLsSSR7qP8eb/wNPI9SogjUI3LahJlJ4vkPSHcjdQhy2xolhSXHKCsOYb3Gq0vEeztPiSAyomJIRWsM7A7BuUkQVCczDJITaJWamSc8WLt4cp70vNQRsiR4zUlOkJ1dxxXD4aNHWNru0wDCNWUtsaC+dOeB9w+AjvPOWu+IdieMT3kTWx+7xcMPQ9hBBQ8wyjsijxx9VIuIvwfFZEsdaSIAs0KetJ7bNpEfsJkRimX9YmWwiBJvDFZ+RJrshBDIszZ2s+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Lazy var criada 2\"\n        title=\"Lazy var criada 2\"\n        src=\"/static/d58dc4eecedf224b34824d098f4d6ce4/f058b/lazy-var-criada-2.png\"\n        srcset=\"/static/d58dc4eecedf224b34824d098f4d6ce4/c26ae/lazy-var-criada-2.png 158w,\n/static/d58dc4eecedf224b34824d098f4d6ce4/6bdcf/lazy-var-criada-2.png 315w,\n/static/d58dc4eecedf224b34824d098f4d6ce4/f058b/lazy-var-criada-2.png 630w,\n/static/d58dc4eecedf224b34824d098f4d6ce4/40601/lazy-var-criada-2.png 945w,\n/static/d58dc4eecedf224b34824d098f4d6ce4/6bff2/lazy-var-criada-2.png 957w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Esta prática tem diversas utilidades e é muito comum em <strong>propriedades computadas</strong>. No exemplo abaixo, a propriedade <code class=\"language-text\">lazy var fullName</code> somente será criada na memória quando invocada. E como não foi chamada no teste não houve desperdício de memória, mesmo o objeto sendo instanciado.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c64ea79e042071517434602aabbf3066/b97f6/lazy-var-nao-invocada.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.0379746835443%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAAA3UlEQVQoz62S627DIAyFef/X7LS0KW2Tcg+YMzsVXUOlLj9m6RgE5vAho4KJmKYJtVZISJb5XyIi5JzfpPI9Yfw+4XK9grxHTfFh/MFMQgw91/dSlApuxwuGYYAbRyx3i8eRxru6/650hiGEjZRgFpORZgPHTw83g+AcrA+IMfLoQaVsqJthSmk1aXSrYXC8EDwib4p5o+qfiI668CVa6w2ltRbqfDY46hknJtOzQ2TPuFQeX7R04hrP6etwgDHmSSjNVQtTtc4SVb6Zdov4zGuHhVpJ2vNN9krhn+MHXoLETmx0Yc0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Lazy var não invocada\"\n        title=\"Lazy var não invocada\"\n        src=\"/static/c64ea79e042071517434602aabbf3066/f058b/lazy-var-nao-invocada.png\"\n        srcset=\"/static/c64ea79e042071517434602aabbf3066/c26ae/lazy-var-nao-invocada.png 158w,\n/static/c64ea79e042071517434602aabbf3066/6bdcf/lazy-var-nao-invocada.png 315w,\n/static/c64ea79e042071517434602aabbf3066/f058b/lazy-var-nao-invocada.png 630w,\n/static/c64ea79e042071517434602aabbf3066/40601/lazy-var-nao-invocada.png 945w,\n/static/c64ea79e042071517434602aabbf3066/b97f6/lazy-var-nao-invocada.png 958w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>","frontmatter":{"title":"Lazy Var","date":"27 fevereiro, 2019","description":""}},"previous":{"fields":{"slug":"/struct-vs-class/"},"frontmatter":{"title":"Struct vs Class"}},"next":{"fields":{"slug":"/gerenciamento-de-memoria/"},"frontmatter":{"title":"Gerenciamento de Memória"}}},"pageContext":{"id":"40bfd97f-614c-5cf6-85fc-580b5017c9f8","previousPostId":"e996788a-b35e-5c44-9904-e515901c7b2f","nextPostId":"e4ea9fc9-813e-5457-92d3-4f9c98333320"}},"staticQueryHashes":["1344965497","2841359383"]}