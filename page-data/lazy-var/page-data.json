{"componentChunkName":"component---src-templates-blog-post-js","path":"/lazy-var/","result":{"data":{"site":{"siteMetadata":{"title":"Felipe Mendes"}},"markdownRemark":{"id":"fd80836f-1cc9-5d16-96d4-4bc4594f9a5b","excerpt":"Em desenvolvimento mobile o poder de computação é muito limitado comparado à outras plataformas. Por esse motivo uma boa prática é criar objetos complexos…","html":"<p>Em desenvolvimento mobile o poder de computação é muito limitado comparado à outras plataformas. Por esse motivo uma boa prática é criar objetos complexos somente quando precisamos deles.</p>\n<p>Swift tem um mecanismo embutido na linguagem que permite o cálculo <a href=\"https://en.wikipedia.org/wiki/Just-in-time_compilation\">just-in-time</a> para tarefas mais complexas chamado de <code class=\"language-text\">lazy var</code>. Esse tipo de declaração permite que a propriedade seja executada somente quando for solicitada pela primeira vez. Se nunca for solicitada, a propriedade nunca é executada.</p>\n<p>No exemplo abaixo foram criadas quatro variáveis, duas com o indicador <code class=\"language-text\">lazy</code> e duas sem. Um <code class=\"language-text\">breakpoint</code> foi habilitado no início da função <code class=\"language-text\">viewDidLoad</code>. Quando o <code class=\"language-text\">breakpoint</code> é acionado <strong>somente as propriedades sem o indicador <code class=\"language-text\">lazy</code> são criadas</strong>. Como podemos confirmar no <code class=\"language-text\">lldb</code>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e0e35b7ddf36e0874bd2fddb41b86a45/6bff2/var-criada.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.26582278481012%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABN0lEQVQoz5WSy26DMBBF/f8f1n2rdtOGIkEhAUKw8RO/bscsqi6aNBnpaJBlGfvMZXaLcNzgPExYhhMUdX2RsNIghYBSOee7YcJHwEWoiwJfBIKxwLbtZO/xaLGeB3htsE4c8zRjOl+grUHMESEFwt8gwHoD7eSODRrs6d2CS46xP6PrR9TtF47ziEWv/2MkvpYeh6HC4VSh4S3YpDakBAyjxDALbDEjZSCQiZB+Ef9YIyJR9hfKN5OOPCVyKC2ElKRuu8NUvgpbaMJSGXg6yBHK2d2hUpp+QJ2GxJWD0ZrWFDT5jjFehZ26CXVVo24adNUnjs+v4F0PRwcFemPB752GR1Mv/WZs1lWgaVuMHxXEyxtSN1BkHo/LT2wkeeNCwCwLgliRyWy+I8ylnHO783LzjS5hKM/f1NUMmMf/DyEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Var criada\"\n        title=\"Var criada\"\n        src=\"/static/e0e35b7ddf36e0874bd2fddb41b86a45/f058b/var-criada.png\"\n        srcset=\"/static/e0e35b7ddf36e0874bd2fddb41b86a45/c26ae/var-criada.png 158w,\n/static/e0e35b7ddf36e0874bd2fddb41b86a45/6bdcf/var-criada.png 315w,\n/static/e0e35b7ddf36e0874bd2fddb41b86a45/f058b/var-criada.png 630w,\n/static/e0e35b7ddf36e0874bd2fddb41b86a45/40601/var-criada.png 945w,\n/static/e0e35b7ddf36e0874bd2fddb41b86a45/6bff2/var-criada.png 957w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Ao avançar a execução do código, as propriedades do tipo <code class=\"language-text\">lazy</code> somente são criadas em tempo de execução.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2aa3bcffeb7a6a9cda776362a536d8b3/b97f6/lazy-var-criada-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.26582278481012%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABOElEQVQoz52S6U7DMBCE8/7PxitQ1FJy4MTN4fiM87EuhyoEEmWl0a78Yzw7O5ULG360qFZx6VqWTmGGGTtbcozs+34XqiluIKRGL4yXkWgteM8ePDkE3mvnr1XVYyK7iOmFUE9ogfPxi+ZuhQ8HUZgzXjsWbRiUxhWV/6yqWxxpSzTthbofcOJbKh+k9CvCV9+w0fE6t3RjQ78qqn6xePFKXwxqnJhWK5ZuPyATBWX2N4RrsHRTQzPWKNNRzYvHuiBbbyRR5+UgwZc3sWD14mdgtgEvNliBk/ddNijI135zMBmr5qx4fHzi6XDg/HymfqnRg5bYLATriSESJAlBtiiIN1HKBR/En6imaeR0PNKrnmWeWdf1akE+ncl1i0i87yjGGImKpvQkvnyv36JT6lN1sSrGhPUbbwuHDqq6+ig9AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Lazy var criada 1\"\n        title=\"Lazy var criada 1\"\n        src=\"/static/2aa3bcffeb7a6a9cda776362a536d8b3/f058b/lazy-var-criada-1.png\"\n        srcset=\"/static/2aa3bcffeb7a6a9cda776362a536d8b3/c26ae/lazy-var-criada-1.png 158w,\n/static/2aa3bcffeb7a6a9cda776362a536d8b3/6bdcf/lazy-var-criada-1.png 315w,\n/static/2aa3bcffeb7a6a9cda776362a536d8b3/f058b/lazy-var-criada-1.png 630w,\n/static/2aa3bcffeb7a6a9cda776362a536d8b3/40601/lazy-var-criada-1.png 945w,\n/static/2aa3bcffeb7a6a9cda776362a536d8b3/b97f6/lazy-var-criada-1.png 958w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d58dc4eecedf224b34824d098f4d6ce4/6bff2/lazy-var-criada-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.26582278481012%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABQklEQVQoz5WSi26DMAxF8/+/tm/YGC3rICXkHUhCuDOlrZC2Tq2lo0TBNn5cZv2EIB36rofkHRzv4YVBMAElJSzL8hLMpALEGW6wUFIieQ9MI5Y4ocSIzRY8a+xbZ5QxwZ0N1KAxSIMp5rvDyxW+vVNwmTGKADNQ61wgBH+t6kmuydY7612+vHFu0QmNNG/tzeUxZc9uGmtO1tDclDf4omXUvEWrBujRE2533u4bKtgrDsIr1OKI6nzAUZ3AhDLQ1mCMHp4CjdMXlJEQWkE5g96sPhKS3rRV5BvuhEhJzRm95pBegLVNj+qjRl194tSc0HYdpKSgcUJKM3KeEXNBJgklIqe86/GPLWslUX9WNEMOYzQsnaN120Ae2ILbEn5/Yd55DMMAT/pb/z4fGhTa9EIVLv/IZrVIOr1UnTMSMZKefwApfgzE6AUMCQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Lazy var criada 2\"\n        title=\"Lazy var criada 2\"\n        src=\"/static/d58dc4eecedf224b34824d098f4d6ce4/f058b/lazy-var-criada-2.png\"\n        srcset=\"/static/d58dc4eecedf224b34824d098f4d6ce4/c26ae/lazy-var-criada-2.png 158w,\n/static/d58dc4eecedf224b34824d098f4d6ce4/6bdcf/lazy-var-criada-2.png 315w,\n/static/d58dc4eecedf224b34824d098f4d6ce4/f058b/lazy-var-criada-2.png 630w,\n/static/d58dc4eecedf224b34824d098f4d6ce4/40601/lazy-var-criada-2.png 945w,\n/static/d58dc4eecedf224b34824d098f4d6ce4/6bff2/lazy-var-criada-2.png 957w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Esta prática tem diversas utilidades e é muito comum em <strong>propriedades computadas</strong>. No exemplo abaixo, a propriedade <code class=\"language-text\">lazy var fullName</code> somente será criada na memória quando invocada. E como não foi chamada no teste não houve desperdício de memória, mesmo o objeto sendo instanciado.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c64ea79e042071517434602aabbf3066/b97f6/lazy-var-nao-invocada.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.0379746835443%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA30lEQVQoz62Q2Y7DIAxF+f/v7JKkkw5hMWa9A22pSKtRX2rpCJTgwzWClMO2behVGqV8JOeMEMIbIiiP8+GEdV2RjUHxfBe3xn/krZqQiN4QmRN+5yumaYJdLvDaIremUfCQ9ItGoXPuyU2YYkQyEV4ZuDo6Sw1HFoYcmLmudGvGkLYLvfdPUZcLq6k2WRB7hCp/TTKE231v77XM8y6l1hri8qOxXBUWabAqAscCFwo47NcRrvda53E6HmHqu/eEUkqImNJunJQyUv5APdNGvp9PiHWyRtuL/uNbCHy5/gAd1sQ+hCIoNAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Lazy var não invocada\"\n        title=\"Lazy var não invocada\"\n        src=\"/static/c64ea79e042071517434602aabbf3066/f058b/lazy-var-nao-invocada.png\"\n        srcset=\"/static/c64ea79e042071517434602aabbf3066/c26ae/lazy-var-nao-invocada.png 158w,\n/static/c64ea79e042071517434602aabbf3066/6bdcf/lazy-var-nao-invocada.png 315w,\n/static/c64ea79e042071517434602aabbf3066/f058b/lazy-var-nao-invocada.png 630w,\n/static/c64ea79e042071517434602aabbf3066/40601/lazy-var-nao-invocada.png 945w,\n/static/c64ea79e042071517434602aabbf3066/b97f6/lazy-var-nao-invocada.png 958w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>","frontmatter":{"title":"Lazy Var","date":"27 fevereiro, 2019","description":""}},"previous":{"fields":{"slug":"/struct-vs-class/"},"frontmatter":{"title":"Struct vs Class"}},"next":{"fields":{"slug":"/gerenciamento-de-memoria/"},"frontmatter":{"title":"Gerenciamento de Memória"}}},"pageContext":{"id":"fd80836f-1cc9-5d16-96d4-4bc4594f9a5b","previousPostId":"540ca7f2-7f39-5fdc-9c32-3a8d56973367","nextPostId":"ad1c5a91-11cb-5a13-9137-82ce5a9e8829"}},"staticQueryHashes":["1344965497","2841359383"]}